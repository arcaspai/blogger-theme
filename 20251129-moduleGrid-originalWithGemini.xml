<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:css='false' b:defaultwidgetversion='2' b:layoutsVersion='3' b:responsive='true' b:templateUrl='indie.xml' b:templateVersion='1.3.0' expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
    <meta content='width=device-width, initial-scale=1' name='viewport'/>
    <b:include data='blog' name='all-head-content'/>
    <title><data:blog.pageTitle/></title>

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&amp;display=swap' rel='stylesheet'/>

    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        main: '#2f333d',
                        bg: '#fcfcfc',
                        accent1: '#9088FF',
                        accent2: '#E3AEFF',
                        accent3: '#8AAEFF',
                    }
                }
            }
        }
    </script>

    <b:skin><![CDATA[
    body {
        background-color: #fcfcfc;
        color: #2f333d;
        font-family: 'Inter', sans-serif;
    }

    /* Outline Text Style */
    .text-outline {
        -webkit-text-stroke: 1.5px #ffffff;
        color: transparent;
        font-weight: 900;
        line-height: 1;
    }
    @media (min-width: 768px) {
        .text-outline {
            -webkit-text-stroke: 2px #ffffff;
        }
    }
    
    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #9088FF; }

    /* Post Body Styling */
    .post-body { font-size: 1.125rem; line-height: 1.8; color: #4a5568; }
    .post-body h1 { font-size: 2.25rem; font-weight: 900; color: #2f333d; margin-top: 3.5rem; margin-bottom: 2rem; line-height: 1.2; border-bottom: 3px solid #E3AEFF; padding-bottom: 0.5rem; }
    .post-body h2 { font-size: 1.875rem; font-weight: 800; color: #2f333d; margin-top: 3rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem; }
    .post-body h2::before { content: ''; display: block; width: 0.5rem; height: 2rem; background-color: #9088FF; }
    .post-body h3 { font-size: 1.5rem; font-weight: 700; color: #2f333d; margin-top: 2rem; margin-bottom: 1rem; }
    .post-body p { margin-bottom: 1.5rem; word-break: keep-all; }
    .post-body img { border-radius: 0.5rem; margin: 2rem 0; width: 100%; height: auto; object-fit: cover; }
    .post-body blockquote { border-left: 4px solid #E3AEFF; padding-left: 1.5rem; font-style: italic; color: #718096; margin: 2rem 0; }
    
    /* Reset Defaults */
    .widget { margin: 0; }
    .section { margin: 0; padding: 0; }
    a:hover { text-decoration: none !important; }
    ]]></b:skin>
</head>

<body class="antialiased selection:bg-accent2 selection:text-main relative overflow-x-hidden">

    <!-- NAVIGATION (Fixed) -->
    <nav class="fixed top-0 left-0 w-full z-50 px-6 py-6 flex justify-between items-center pointer-events-none">
        <!-- Logo (Modified to use Image) -->
        <a expr:href='data:blog.homepageUrl' class="pointer-events-auto shrink-0 mr-4 hidden md:block hover:opacity-80 transition-opacity">
            <img src="https://via.placeholder.com/150x40/2f333d/ffffff?text=LOGO" alt="Blog Logo" class="h-8 w-auto object-contain"/>
        </a>

        <!-- Menu -->
        <div class="pointer-events-auto bg-main/80 backdrop-blur-md border border-white/10 rounded-full px-6 py-3 flex gap-6 md:gap-8 shadow-2xl max-w-full overflow-x-auto" style="-ms-overflow-style: none; scrollbar-width: none;">
             <a expr:href='data:blog.homepageUrl' class="text-xs md:text-sm font-bold text-white hover:text-accent1 transition-colors uppercase tracking-widest whitespace-nowrap">Home</a>
             <a href="/p/about.html" class="text-xs md:text-sm font-bold text-white hover:text-accent2 transition-colors uppercase tracking-widest whitespace-nowrap">About</a>
             <a href="#" class="text-xs md:text-sm font-bold text-white hover:text-accent3 transition-colors uppercase tracking-widest whitespace-nowrap">Work</a>
             <a href="mailto:your-email@example.com" class="text-xs md:text-sm font-bold text-accent1 hover:text-white transition-colors uppercase tracking-widest whitespace-nowrap">Contact</a>
        </div>
    </nav>

    <!-- HEADER SECTION (Homepage Only) -->
    <b:if cond='data:view.isHomepage'>
        <header class="w-full h-[100vh] max-h-[900px] bg-main p-2 md:p-4">
            <div class="w-full h-full grid grid-cols-3 grid-rows-6 md:grid-cols-6 md:grid-rows-3 gap-1 md:gap-2">
                <!-- Cell 1: Blog Title -->
                <div class="col-span-3 row-span-1 md:col-span-3 md:row-span-2 border border-white/20 p-6 flex flex-col justify-center items-start relative overflow-hidden group">
                    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div>
                    <h1 class="text-5xl md:text-8xl text-outline uppercase tracking-tighter z-10 group-hover:translate-x-2 transition-transform duration-500">
                        <data:blog.title/>
                    </h1>
                    <p class="text-accent2 mt-4 text-sm md:text-lg font-medium opacity-80 z-10">
                        Creative Digital Experience
                    </p>
                </div>
                <!-- Other Grid Cells -->
                <div class="col-span-1 row-span-1 bg-accent1 flex items-center justify-center hover:brightness-110 transition-all cursor-pointer">
                    <i data-lucide="arrow-up-right" class="text-white w-8 h-8 md:w-12 md:h-12"></i>
                </div>
                <div class="col-span-2 row-span-1 md:col-span-1 md:row-span-1 border border-white/10 relative overflow-hidden group">
                    <img src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&amp;w=1000&amp;auto=format&amp;fit=crop" class="object-cover w-full h-full opacity-60 group-hover:opacity-100 transition-opacity duration-500" alt="Abstract"/>
                </div>
                <div class="col-span-3 row-span-1 md:col-span-1 md:row-span-1 bg-white/5 border border-white/10 p-4 flex flex-col justify-between">
                    <span class="text-accent3 text-xs font-mono">01 / INTRO</span>
                    <p class="text-white text-sm leading-tight">Structure out of chaos.</p>
                </div>
                <div class="hidden md:flex col-span-1 row-span-2 bg-accent3 items-end p-4">
                    <span class="text-main font-bold text-xl writing-mode-vertical">SCROLL</span>
                </div>
                <div class="col-span-1 row-span-1 border border-white/10 flex items-center justify-center">
                     <div class="w-2 h-2 rounded-full bg-white/20"></div>
                </div>
                <div class="col-span-2 row-span-2 md:col-span-2 md:row-span-1 relative overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&amp;w=1000&amp;auto=format&amp;fit=crop" class="object-cover w-full h-full grayscale hover:grayscale-0 transition-all duration-500" alt="Architecture"/>
                    <div class="absolute inset-0 bg-accent1/20 mix-blend-multiply"></div>
                </div>
                <div class="col-span-1 row-span-1 bg-accent2 flex items-center justify-center">
                     <i data-lucide="asterisk" class="text-main w-10 h-10 animate-spin-slow"></i>
                </div>
                <div class="col-span-2 md:col-span-1 row-span-1 bg-black/20 border border-white/10 flex items-center justify-center p-4">
                    <a href="#" class="flex items-center justify-center text-white text-xs border border-white/50 px-4 py-2 rounded-full hover:bg-white hover:text-main transition-colors uppercase tracking-widest w-full h-10">Subscribe</a>
                </div>
                 <div class="hidden md:block col-span-1 row-span-1 border border-white/10 relative group overflow-hidden">
                    <div class="absolute inset-0 bg-accent1 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white/30 group-hover:text-white transition-colors">
                        <span class="font-mono text-xs">BLOGGER</span>
                    </div>
                 </div>
                 <div class="md:hidden col-span-1 row-span-1 bg-accent3"></div>
                 <div class="md:hidden col-span-2 row-span-1 border border-white/10"></div>
            </div>
        </header>
    </b:if>

    <!-- MAIN CONTENT AREA -->
    <main class="max-w-[1400px] mx-auto min-h-screen">
        <b:section id='main' showaddelement='yes'>
            <b:widget id='Blog1' locked='true' title='Blog Posts' type='Blog'>
                <b:includable id='main' var='top'>
                    
                    <!-- [VIEW 1] LIST / HOMEPAGE -->
                    <b:if cond='data:view.isMultipleItems'>
                        
                        <div class="px-6 py-20">
                            <div class="flex justify-between items-baseline mb-8 border-b border-gray-200 pb-4">
                                <h3 class="text-xl font-bold flex items-center gap-2">
                                    <span class="w-3 h-3 bg-accent1 rounded-full"></span>
                                    Latest Posts
                                </h3>
                                <span class="text-sm text-gray-400 font-mono">Archive</span>
                            </div>

                            <div class='grid grid-cols-1 md:grid-cols-12 gap-6 mb-12'>
                                <b:loop values='data:posts' var='post'>
                                    <article class='col-span-12 md:col-span-4 group cursor-pointer flex flex-col h-full'>
                                        <!-- Thumbnail Link -->
                                        <div expr:class='"aspect-[2/1] bg-gray-100 mb-4 overflow-hidden relative rounded-sm thumbnail-container " + (data:post.firstImageUrl ? "" : "needs-image")' 
                                             expr:data-id='data:post.id'>
                                            
                                            <a expr:href='data:post.url' class="block w-full h-full">
                                                <b:if cond='data:post.firstImageUrl'>
                                                    <img expr:alt='data:post.title' expr:src='data:post.firstImageUrl' class="object-cover w-full h-full group-hover:scale-110 transition-transform duration-500"/>
                                                <b:else/>
                                                    <!-- Placeholder for JS to replace -->
                                                    <div class="w-full h-full bg-main flex items-center justify-center text-white/20 placeholder-box">
                                                        <span class="text-outline text-4xl">NO IMG</span>
                                                    </div>
                                                    <img class="hidden object-cover w-full h-full group-hover:scale-110 transition-transform duration-500 real-image"/>
                                                </b:if>
                                            </a>
                                            <div class="absolute top-4 right-4 bg-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
                                                <i data-lucide="arrow-up-right" class="w-4 h-4 text-main"></i>
                                            </div>
                                        </div>

                                        <div class="flex items-center gap-2 mb-2">
                                            <b:if cond='data:post.labels'>
                                                <span class="px-2 py-1 bg-accent1/10 text-accent1 text-xs font-bold rounded">
                                                    <data:post.labels.first.name/>
                                                </span>
                                            </b:if>
                                            <span class="text-xs text-gray-400"><data:post.date/></span>
                                        </div>

                                        <h2 class='text-xl font-bold group-hover:text-accent1 transition-colors leading-tight mb-2'>
                                            <a expr:href='data:post.url'><data:post.title/></a>
                                        </h2>
                                        <p class="text-sm text-gray-500 line-clamp-2"><data:post.snippet/></p>
                                    </article>
                                </b:loop>
                            </div>
                            
                            <!-- Pagination -->
                            <div class='flex justify-center mt-12 gap-4'>
                                <b:if cond='data:newerPageUrl'>
                                     <a class='px-6 py-2 border border-main rounded-full text-sm font-bold hover:bg-main hover:text-white transition-colors' expr:href='data:newerPageUrl'>Previous</a>
                                </b:if>
                                <b:if cond='data:olderPageUrl'>
                                     <a class='px-6 py-2 border border-main rounded-full text-sm font-bold hover:bg-main hover:text-white transition-colors' expr:href='data:olderPageUrl'>Next</a>
                                </b:if>
                            </div>
                        </div>

                    <!-- [VIEW 2] POST DETAIL -->
                    <b:else/>
                        <b:loop values='data:posts' var='post'>
                            
                            <!-- 1. POST HEADER -->
                            <header class="pt-32 pb-12 md:pt-48 md:pb-20 px-6 max-w-[1400px] mx-auto">
                                <div class="border-b border-gray-200 pb-8 mb-8">
                                    <b:if cond='data:post.labels'>
                                        <span class="text-accent1 font-bold text-sm tracking-widest uppercase mb-2 block">
                                            <data:post.labels.first.name/>
                                        </span>
                                    </b:if>
                                    <h1 class="text-4xl md:text-7xl font-bold text-main leading-tight break-words break-keep">
                                        <data:post.title/>
                                    </h1>
                                </div>

                                <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                                    <div>
                                        <span class="text-gray-400 text-xs font-mono block mb-1">AUTHOR</span>
                                        <span class="text-main font-bold"><data:post.author.name/></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-400 text-xs font-mono block mb-1">DATE</span>
                                        <span class="text-main font-bold"><data:post.date/></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-400 text-xs font-mono block mb-1">CATEGORY</span>
                                        <span class="text-main font-bold">
                                            <b:if cond='data:post.labels'><data:post.labels.first.name/><b:else/>Uncategorized</b:if>
                                        </span>
                                    </div>
                                    <div>
                                        <span class="text-gray-400 text-xs font-mono block mb-1">SHARE</span>
                                        <a href="#" class="text-accent1 font-bold hover:underline" onclick="navigator.clipboard.writeText(window.location.href); alert('Link Copied!'); return false;">Copy Link â†—</a>
                                    </div>
                                </div>
                            </header>

                            <!-- 2. MAIN VISUAL (Use First Image) -->
                            <b:if cond='data:post.firstImageUrl'>
                                <div class="w-full h-[60vh] md:h-[80vh] overflow-hidden bg-gray-100">
                                    <img expr:src='data:post.firstImageUrl' class="w-full h-full object-cover" alt="Main Visual"/>
                                </div>
                            </b:if>

                            <!-- 3. POST CONTENT -->
                            <div class="max-w-[900px] mx-auto px-6 py-20 md:py-32 overflow-hidden">
                                <!-- The Actual Content -->
                                <div class="post-body text-main">
                                    <data:post.body/>
                                </div>
                            </div>

                        </b:loop>
                    </b:if>

                </b:includable>
            </b:widget>
        </b:section>
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-gray-200 bg-[#fcfcfc] py-12">
        <div class="max-w-[1400px] mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="text-2xl font-bold text-main tracking-tighter">MODULA</div>
            <div class="flex gap-6 text-sm text-gray-500">
                <a href="#" class="hover:text-accent1">Blogger Theme</a>
                <a href="#" class="hover:text-accent1">Instagram</a>
            </div>
            <div class="text-xs text-gray-400">
                &#169; <span id='current-year'></span> Modula Grid Design.
                <script>document.getElementById('current-year').innerText = new Date().getFullYear();</script>
            </div>
        </div>
    </footer>

    <!-- Image Rescue Script -->
    <script>
        //<![CDATA[
        document.addEventListener("DOMContentLoaded", function() {
            lucide.createIcons();
            const containers = document.querySelectorAll('.needs-image');
            if(containers.length > 0) {
                containers.forEach(function(container) {
                    const postId = container.getAttribute('data-id');
                    if (postId) fetchImageForPost(postId, container);
                });
            }
            function fetchImageForPost(postId, container) {
                const script = document.createElement('script');
                script.src = '/feeds/posts/default/' + postId + '?alt=json-in-script&callback=handlePostResponse_' + postId;
                document.body.appendChild(script);
                window['handlePostResponse_' + postId] = function(json) {
                    let imageUrl = null;
                    const entry = json.entry;
                    if (entry.media$thumbnail) {
                        imageUrl = entry.media$thumbnail.url.replace(/\/s[0-9]+(-c)?\//, "/w600/");
                    } else if (entry.content && entry.content.$t) {
                        const div = document.createElement('div');
                        div.innerHTML = entry.content.$t;
                        const img = div.querySelector('img');
                        if (img) imageUrl = img.src;
                    }
                    if (imageUrl) {
                        const placeholder = container.querySelector('.placeholder-box');
                        const imgEl = container.querySelector('.real-image');
                        if(placeholder) placeholder.style.display = 'none';
                        if(imgEl) { imgEl.src = imageUrl; imgEl.classList.remove('hidden'); }
                    }
                    delete window['handlePostResponse_' + postId];
                    document.body.removeChild(script);
                };
            }
        });
        //]]>
    </script>
</body>
</html>
